# Adding a New Node to LibreNMS

Both the eNodeB and the ePC must be configured individually in order for them to report statistics to the SNMP Manager. Since the eNodeB is not directly accessible from the management VPN, we configure an SNMP proxy on the ePC to pass SNMP statistics to the Management host.

# Baicells SNMP configuration
* Log into the Baicells configuration console:
```https://<Baicells IP Address>```

* From the left menu, select System

* Select SNMP
![Example Screenshot: enabling SNMP in the Baicells Console](https://i.imgur.com/YanPtMs.png)
   * Under ‘SNMP Switch,’ select ‘Enable’
   * Configure the following options:
      * Community String: private
      * Contact: lcl@seattlecommunitynetwork.org
      * Location: \<SITE NAME STRING\> (String should not have any spaces)
      * Source: Any

# Adding New Devices to LibreNMS
* If the ePC is running, librenms should be able to auto-discover it. Run this command from a shell on the jumpbox:
```sudo -u librenms lnms scan```

* LibreNMS should print a status message that it was able to add a new device.

* When first discovered, the ePC will show up generically as it’s ip address. Edit the hostname, but clicking ‘Edit Device’ (gear icon):
   * Click the red pencil icon, and change the ip address to the hostname
   * Fill ‘Overwrite IP’ with the ePC IP address
      * *Note: If the IP is not changed to the hostname, you will not be able to add the eNodeB by it’s IP address*
![Example Screenshot: Updating ePC Hostname in LibreNMS](https://i.imgur.com/LHeL3Zq.png)

* The Baicells eNB needs to be added manually: From LibreNMS, select Devices and click “Add Device”
![Example Screenshot: Manually adding eNodeB to LibreNMS](https://i.imgur.com/Tlqpbh3.png)

* Add a new device, with the following configurations:
   * Hostname: <IP Address of the site’s EPC>
   * Community: ‘enodeb’
   * Force Add: On

* *Note: If you receive an error message stating that a device with the specified IP already exists, make sure that you have* successfully changed the eNodeB’s hostname per the previous step.

* Once the device is added, click the ‘Edit Device’ icon (gear icon) and update the following values:
   * Display name: \<eNB Cell Name\>
   * Overwrite device contact: lcl@seattlecommunitynetwork.org

# Other helpful notes:

* [Baicells eNB config guide](https://img.baicells.com//Upload/20210810/FILE/195c7e84-47d9-4acb-aa00-cba0e080d885.pdf)

* How to SSH into Baicells eNB:
   * SSH using port 27149 (username same as normal web-based login)
   * Convert the MAC address of this eNB to link local address: http://www.sput.nl/internet/ipv6/ll-mac.html

